<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trusted Text | AI Detector</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #ffffff;
            overflow-x: hidden;
        }
        
        .floating-icon {
            position: absolute;
            border-radius: 22px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(2deg); }
        }
        
        .blur-sm { filter: blur(2px); opacity: 0.6; }
        .blur-md { filter: blur(4px); opacity: 0.4; }
        .blur-lg { filter: blur(8px); opacity: 0.3; }
        
        .input-wrapper {
            background: rgba(240, 240, 240, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .analyze-btn {
            background: #3b82f6;
            transition: all 0.2s ease;
        }
        
        .analyze-btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .analyze-btn:active {
            transform: translateY(0);
        }
        
        .result-panel {
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0,0,0,0.05);
        }
    </style>
<base target="_blank">
</head>
<body class="min-h-screen relative flex flex-col">

    <!-- Floating App Icons (Decorative) -->
    <div class="fixed inset-0 pointer-events-none overflow-hidden">
        <!-- Blue App Icon (Top Left) -->
        <div class="floating-icon w-12 h-12 bg-blue-500 left-[10%] top-[15%] blur-sm" style="animation-delay: 0s;"></div>
        
        <!-- Green Square (Left Middle) -->
        <div class="floating-icon w-16 h-16 bg-green-500 left-[15%] top-[40%]" style="animation-delay: 1s;"></div>
        
        <!-- Yellow/Orange Smiley (Bottom Left) -->
        <div class="floating-icon w-20 h-20 bg-yellow-400 left-[8%] bottom-[25%] blur-md" style="animation-delay: 2s;">
            <div class="w-full h-full flex items-center justify-center text-yellow-600 text-2xl">â˜»</div>
        </div>
        
        <!-- Blue Twitter Bird (Right) -->
        <div class="floating-icon w-10 h-10 bg-sky-400 right-[15%] top-[30%] blur-sm" style="animation-delay: 0.5s;"></div>
        
        <!-- Red/Orange Icon (Right Middle) -->
        <div class="floating-icon w-14 h-14 bg-red-400 right-[10%] top-[50%]" style="animation-delay: 1.5s;"></div>
        
        <!-- Purple/Pink Icon (Top Right) -->
        <div class="floating-icon w-12 h-12 bg-purple-400 right-[20%] top-[20%] blur-lg" style="animation-delay: 2.5s;"></div>
        
        <!-- Small Blue Cube (Bottom) -->
        <div class="floating-icon w-8 h-8 bg-blue-300 left-[30%] bottom-[20%] blur-md" style="animation-delay: 3s;"></div>
        
        <!-- Green Map Pin (Left) -->
        <div class="floating-icon w-10 h-10 bg-green-300 left-[25%] top-[60%] blur-sm" style="animation-delay: 1.8s;"></div>
        
        <!-- Dark Icon (Center Left) -->
        <div class="floating-icon w-11 h-11 bg-gray-800 left-[5%] top-[25%] blur-lg" style="animation-delay: 0.8s;"></div>
        
        <!-- Light Blue (Top Center) -->
        <div class="floating-icon w-14 h-14 bg-blue-200 left-[45%] top-[10%] blur-md" style="animation-delay: 2.2s;"></div>
        
        <!-- Pink/Magenta (Right Bottom) -->
        <div class="floating-icon w-16 h-16 bg-pink-400 right-[8%] bottom-[30%] blur-sm" style="animation-delay: 3.5s;"></div>
        
        <!-- Teal (Center Right) -->
        <div class="floating-icon w-9 h-9 bg-teal-400 right-[25%] bottom-[35%]" style="animation-delay: 4s;"></div>
        
        <!-- Orange (Top Right Far) -->
        <div class="floating-icon w-12 h-12 bg-orange-400 right-[5%] top-[10%] blur-lg" style="animation-delay: 1.2s;"></div>
        
        <!-- Light Purple (Bottom Center) -->
        <div class="floating-icon w-10 h-10 bg-purple-200 left-[50%] bottom-[15%] blur-md" style="animation-delay: 2.8s;"></div>
    </div>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col items-center justify-center px-4 relative z-10">
        
        <!-- Headline -->
        <h1 class="text-4xl md:text-6xl lg:text-7xl font-light text-gray-800 mb-12 tracking-tight text-center">
            Paste your text.
        </h1>
        
        <!-- Big Input Section -->
        <div class="w-full max-w-3xl relative">
            <div class="input-wrapper rounded-full p-2 flex items-center shadow-sm">
                <input 
                    type="text" 
                    id="textInput"
                    placeholder="Enter text to analyze..." 
                    class="flex-1 bg-transparent border-none outline-none px-6 py-4 text-lg text-gray-700 placeholder-gray-400"
                    style="min-width: 0;"
                >
                <button 
                    onclick="analyzeText()"
                    id="analyzeBtn"
                    class="analyze-btn text-white px-8 py-4 rounded-full font-medium text-base whitespace-nowrap"
                >
                    Analyze
                </button>
            </div>
            
            <!-- Character Count -->
            <div class="text-center mt-3 text-xs text-gray-400" id="charCount">0 / 10,000 characters</div>
        </div>

        <!-- Results (Hidden by default) -->
        <div id="resultPanel" class="hidden mt-8 result-panel rounded-3xl p-8 max-w-2xl w-full mx-4 shadow-lg">
            <div class="flex items-center justify-between mb-4">
                <span id="resultLabel" class="text-2xl font-medium text-gray-800">Analysis Result</span>
                <span id="confidenceBadge" class="px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-600">
                    Confidence: <span id="confidenceValue">--</span>
                </span>
            </div>
            
            <div class="flex items-center gap-4 mb-6">
                <div id="probabilityBar" class="flex-1 h-3 bg-gray-100 rounded-full overflow-hidden">
                    <div id="probabilityFill" class="h-full bg-blue-500 rounded-full transition-all duration-1000" style="width: 0%"></div>
                </div>
                <span id="probabilityText" class="text-lg font-semibold text-gray-700">0%</span>
            </div>
            
            <div class="grid grid-cols-2 gap-4 text-sm text-gray-600">
                <div>
                    <span class="block text-gray-400 text-xs uppercase tracking-wider mb-1">Label</span>
                    <span id="labelText" class="font-medium text-lg">--</span>
                </div>
                <div>
                    <span class="block text-gray-400 text-xs uppercase tracking-wider mb-1">Processing Time</span>
                    <span id="timeText" class="font-medium">--</span>
                </div>
            </div>
        </div>

        <!-- Error Toast -->
        <div id="errorToast" class="hidden fixed top-24 left-1/2 transform -translate-x-1/2 bg-red-50 text-red-600 px-6 py-3 rounded-full shadow-lg text-sm font-medium border border-red-100">
            Error message here
        </div>

    </main>

    <!-- Minimal Footer -->
    <footer class="relative z-10 py-6 px-8 flex flex-col md:flex-row justify-between items-center text-sm text-gray-400 gap-4">
        <div>TrustedText</div>
        <div class="flex gap-6">
            <a href="https://github.com/theoncetimes/trustedText" class="hover:text-gray-600 transition-colors">GitHub</a>
            <a href="https://theoncetimes.com" class="hover:text-gray-600 transition-colors">The Once Times</a>
        </div>
    </footer>

    <script>
        const API_URL = 'http://localhost:8000';
        
        const textInput = document.getElementById('textInput');
        const charCount = document.getElementById('charCount');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const resultPanel = document.getElementById('resultPanel');
        const errorToast = document.getElementById('errorToast');
        
        // Character counter
        textInput.addEventListener('input', function(e) {
            const count = e.target.value.length;
            charCount.textContent = `${count} / 10,000 characters`;
            
            if (count > 9000) {
                charCount.classList.add('text-red-400');
            } else {
                charCount.classList.remove('text-red-400');
            }
        });
        
        // Enter key to submit
        textInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                analyzeText();
            }
        });
        
        async function analyzeText() {
            const text = textInput.value.trim();
            
            if (!text) {
                showError('Please enter some text');
                return;
            }
            
            if (text.length > 10000) {
                showError('Text too long (max 10,000 characters)');
                return;
            }
            
            // Loading state
            const originalText = analyzeBtn.textContent;
            analyzeBtn.textContent = 'Analyzing...';
            analyzeBtn.disabled = true;
            resultPanel.classList.add('hidden');
            
            try {
                const response = await fetch(`${API_URL}/detect`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        text
                    })
                });
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.detail || 'Detection failed');
                }
                
                const result = await response.json();
                displayResult(result);
                
            } catch (error) {
                showError(error.message || 'Server connection failed');
                analyzeBtn.textContent = originalText;
                analyzeBtn.disabled = false;
            }
        }
        
        function displayResult(result) {
            const isAI = result.label === 'AI';
            const percentage = (result.ai_probability * 100).toFixed(1);
            
            document.getElementById('resultLabel').textContent = isAI ? 'AI-Generated' : 'Human-Written';
            document.getElementById('confidenceValue').textContent = result.confidence || 'N/A';
            document.getElementById('probabilityText').textContent = percentage + '%';
            document.getElementById('labelText').textContent = result.label;
            document.getElementById('timeText').textContent = result.processing_time_ms + 'ms';
            
            const fill = document.getElementById('probabilityFill');
            fill.style.width = percentage + '%';
            
            if (isAI) {
                fill.classList.remove('bg-green-500', 'bg-blue-500');
                fill.classList.add('bg-red-500');
                document.getElementById('resultLabel').classList.add('text-red-600');
                document.getElementById('resultLabel').classList.remove('text-green-600');
            } else {
                fill.classList.remove('bg-red-500', 'bg-blue-500');
                fill.classList.add('bg-green-500');
                document.getElementById('resultLabel').classList.add('text-green-600');
                document.getElementById('resultLabel').classList.remove('text-red-600');
            }
            
            resultPanel.classList.remove('hidden');
            analyzeBtn.textContent = 'Analyze';
            analyzeBtn.disabled = false;
        }
        
        function showError(message) {
            errorToast.textContent = message;
            errorToast.classList.remove('hidden');
            
            setTimeout(() => {
                errorToast.classList.add('hidden');
            }, 3000);
        }
    </script>
</body>
</html>